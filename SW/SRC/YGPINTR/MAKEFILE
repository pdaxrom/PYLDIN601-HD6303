UNIAS = ../SMALL-C/unias

#HWDEF = -D LILITH

ALL: $(UNIAS) Y1.ROM Y2.ROM Y.CMD Y1.RAM Y2.RAM YCHECK.CMD

$(UNIAS):
	make -C $(shell dirname $(UNIAS)) $(shell basename $(UNIAS))

Y1.ASM:		ROM_RAM.DEF PCONTROL.DEF			\
		INTERRUP.INC UNDOCUME.INC 			\
		GLOBALS.Y SYS_PAGE.Y ERRORNO.Y			\
		ROMHEAD1.Y1 ERRORS1.Y1 MISC.Y1			\
		OPCODEAD.Y1 STDLYCRE.Y1 CNSTLOAD.Y1		\
		VARIABLE.Y1 RECORDAR.Y1 PACKED.Y1		\
		ARITHMET.Y1 COMPARIS.Y1 JUMPS.Y1		\
		STRINGS.Y1 POWERSET.Y1 DYNAMICM.Y1		\
		FPINSTR.Y1 PROCCALL.Y1 PROCEXIT.Y1		\
		SEGINITF.Y1 MISC_.Y1 RAMCODE.Y1 CRIGHT.Y1

Y2.ASM:		ROM_RAM.DEF PCONTROL.DEF			\
		INTERRUP.INC UNDOCUME.INC			\
		GLOBALS.Y SYS_PAGE.Y ERRORNO.Y			\
		IOERRORN.Y2 ROMHEAD2.Y2 MAIN2SUB.Y2		\
		LYCODES2.Y2 FILLMOVE.Y2 DATETIME.Y2		\
		STRINGS2.Y2 SPECIAL2.Y2 STRVAL.Y2		\
		FILEMGR.Y2 OPENCLOS.Y2 WRITE.Y2			\
		READ.Y2 OTHERIO.Y2 MISCIO.Y2			\
		OVERLAY.Y2 LINKUP.Y2 STARTUP.Y2			\
		EXITYCOD.Y2 ERRORS2.Y2 CRIGHT.Y2

Y.ASM:		INTERRUP.INC  UNDOCUME.INC GLOBALS.Y

CHECK.ASM:	INTERRUP.INC  UNDOCUME.INC GLOBALS.Y

Y1.ROM:		Y1.ASM
	$(UNIAS) -D ROMVERSION $(HWDEF) -l Y1.LST -o Y1.CMD Y1.ASM
	mv -f Y1.CMD Y1.ROM

Y2.ROM:		Y2.ASM
	$(UNIAS) -D ROMVERSION $(HWDEF) -l Y2.LST -o Y2.CMD Y2.ASM
	mv -f Y2.CMD Y2.ROM

Y1.RAM:		Y1.ASM
	$(UNIAS) -l Y1RAM.LST $(HWDEF) -o Y1.CMD Y1.ASM
	mv -f Y1.CMD Y1.RAM

Y2.RAM:		Y2.ASM
	$(UNIAS) -l Y2RAM.LST $(HWDEF) -o Y2.CMD Y2.ASM
	mv -f Y2.CMD Y2.RAM

Y.CMD:		Y.ASM
	$(UNIAS) $(HWDEF) -l Y.LST -o Y.CMD Y.ASM

YCHECK.CMD:	CHECK.ASM
	$(UNIAS) $(HWDEF) -l YCHECK.LST -o YCHECK.CMD CHECK.ASM

clean:
	rm -f *.ROM *.RAM *.LST *.CMD
